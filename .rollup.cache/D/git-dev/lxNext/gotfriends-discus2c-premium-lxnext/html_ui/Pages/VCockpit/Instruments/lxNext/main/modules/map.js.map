{"version":3,"file":"map.js","sourceRoot":"","sources":["../../../../../../../../src/main/modules/map.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,SAAS,EAAE,MAAM,EAAC,MAAM,SAAS,CAAC;AAChD,OAAO,0BAA0B,CAAC;AAElC,MAAM,OAAO,MAAM;IAOf,YAAY,UAAc;QACtB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAElB,IAAI,CAAC,aAAa,GAAG,mDAAmD,CAAC;IAC7E,CAAC;IAED,OAAO;QACH,MAAM,CAAC,cAAc,CAAC,aAAa,EAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QACpD,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAC7B,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACrD,IAAI,SAAS,CAAC,IAAI,CAAC,aAAa,EAAE;YAC9B,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC;YACV,UAAU,EAAC,CAAC,KAAK,EAAC,KAAK,EAAC,KAAK,EAAC,KAAK,CAAC;SACvC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEnB,IAAI,SAAS,CAAC,4GAA4G,EAAE;YACxH,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,CAAC;YACV,UAAU,EAAC,CAAC,GAAG,EAAC,GAAG,EAAC,GAAG,CAAC;SAC3B,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC;IAED,MAAM;QACF,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,cAAc,CAAC,aAAa,EAAC,SAAS,CAAC,CAAC,CAAC;QACzE,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC7B,CAAC;IAED,iBAAiB;QACb,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACvD,CAAC;IAED,WAAW;QAEP,IAAI,GAAG,GAAG,UAAU,CAAC,MAAM,CAAC,cAAc,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,CAAW,CAAC;QAC9F,IAAI,IAAI,GAAG,UAAU,CAAC,MAAM,CAAC,cAAc,CAAC,mBAAmB,EAAE,mBAAmB,CAAC,CAAW,CAAC;QACjG,IAAI,GAAG,GAAW,IAAI,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACxC,OAAO,GAAG,CAAC;IACf,CAAC;CACJ","sourcesContent":["import { Map, TileLayer, LatLng} from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nexport class Navmap {\r\n\r\n    public map: any;\r\n    private lx: any;\r\n    private mapZoom: number;\r\n    private tileserverUrl: string;\r\n\r\n    constructor(instrument:any) {\r\n        this.mapZoom = 12;\r\n\r\n        this.tileserverUrl = 'http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}';\r\n    }\r\n\r\n    initMap() {\r\n        SimVar.SetSimVarValue(\"L:LX_Knob_3\",\"percent\", 0.5);\r\n        let pos = this.getPosition();\r\n        this.map = new Map('map').setView(pos, this.mapZoom);\r\n        new TileLayer(this.tileserverUrl, {\r\n            maxZoom: 16,\r\n            minZoom: 6,\r\n            subdomains:['mt0','mt1','mt2','mt3']\r\n        }).addTo(this.map);\r\n\r\n        new TileLayer('https://{s}.api.tiles.openaip.net/api/data/openaip/{z}/{x}/{y}.png?apiKey=7beacc9257a32efe75a26bcbcb222874', {\r\n            maxZoom: 16,\r\n            minZoom: 6,\r\n            subdomains:['a','b','c']\r\n        }).addTo(this.map);\r\n    }    \r\n\r\n    update() {\r\n        this.mapZoom = 6 + (10 * SimVar.GetSimVarValue(\"L:LX_Knob_3\",\"percent\"));\r\n        this.update_map_center();\r\n    }\r\n\r\n    update_map_center() {\r\n        this.map.setView(this.getPosition(), this.mapZoom);\r\n    }\r\n\r\n    getPosition() {\r\n        \r\n        let lat = parseFloat(SimVar.GetSimVarValue(\"A:PLANE LATITUDE\", \"degrees latitude\")) as number;\r\n        let long = parseFloat(SimVar.GetSimVarValue(\"A:PLANE LONGITUDE\", \"degrees longitude\")) as number;\r\n        let pos: LatLng = new LatLng(lat, long);\r\n        return pos;\r\n    }\r\n}"]}